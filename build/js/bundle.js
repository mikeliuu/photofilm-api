!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=4)}([function(e,n){e.exports=require("@babel/runtime/regenerator")},function(e,n){e.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(e,n){e.exports=require("express")},function(e,n){e.exports=require("mongoose")},function(e,n,t){t(5).config();var r=t(2),o=t(6),i=t(7),u=t(3),c=t(8),s=r();u.connect("mongodb+srv://".concat("mikeliu",":").concat("mikeliu","@cms-zll3o.mongodb.net/test?retryWrites=true&w=majority"),{useNewUrlParser:!0,useUnifiedTopology:!0,useFindAndModify:!1}).then((function(){console.log("mongodb connected")})).catch((function(e){console.log(e)})),s.use(o.json()),s.use(o.urlencoded({extended:!0,useFindAndModify:!1})),s.use(i()),s.use("/api/films",c),s.get("/",(function(e,n){n.send("running photofilm api server"),console.log('get "/" success')})),s.listen("8810",(function(){console.log("Listening on port: ".concat("8810"))}))},function(e,n){e.exports=require("dotenv")},function(e,n){e.exports=require("body-parser")},function(e,n){e.exports=require("cors")},function(e,n,t){var r=t(2).Router(),o=t(9);r.get("/",o.fetchFilms),r.get("/:id",o.getFilm),r.put("/:id",o.updateFilm),r.post("/create",o.createFilm),e.exports=r},function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r),i=t(1),u=t.n(i),c=t(10).ObjectID,s=t(11);exports.fetchFilms=function(){var e=u()(o.a.mark((function e(n,t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.find({}).then((function(e){t.send(e),console.log('get "/api/films" success')})).catch((function(e){console.log(e),t.sendStatus(400)}));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),exports.getFilm=function(){var e=u()(o.a.mark((function e(n,t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.params.id,e.next=3,s.findOne({_id:r}).then((function(e){t.send(e),console.log('get "/api/films/'.concat(r,'" success'))})).catch((function(e){console.log(e),t.sendStatus(400)}));case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),exports.createFilm=function(){var e=u()(o.a.mark((function e(n,t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("req.body",n.body),e.next=3,s.create(n.body,(function(e,n){e&&(console.log(e),t.sendStatus(400)),t.send(n),console.log('post "/api/films/create" success')}));case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),exports.updateFilm=function(){var e=u()(o.a.mark((function e(n,t){var r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.params.id,i={},n.body.saved&&(i={saved:n.body.saved,updated_at:Date.now()}),n.body.viewed&&(i={viewed:n.body.viewed,updated_at:Date.now()}),console.log("content",i),e.next=9,s.findOneAndUpdate({_id:c(r)},i,{new:!0}).then((function(e){t.send(e),console.log('put "/api/films/'.concat(r,'" success'))})).catch((function(e){console.log(e),t.sendStatus(400)}));case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},function(e,n){e.exports=require("mongodb")},function(e,n,t){var r=t(3),o=new r.Schema({name:{type:String,required:!0},brand:{type:String,required:!0},saved:{type:Number,required:!0,default:0},viewed:{type:Number,required:!0,default:0},image:{type:String,required:!0},description:{type:String,required:!0},created_at:{type:Date,default:Date.now},updated_at:{type:Date,default:Date.now}},{versionKey:!1}),i=r.model("Film",o);e.exports=i}]);